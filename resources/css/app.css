@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   BASE
   ========================================================= */
@layer base {
  :root{
    --accent-rgb: 34 211 238;   /* cyan */
    --accent2-rgb: 59 130 246;  /* blue */
  }

  html { scroll-behavior: smooth; }

  body{
    overflow-x: hidden;
    position: relative;
    isolation: isolate;
  }

  /* Bloquea scroll mientras esté activo el preloader */
  body.preloading { overflow: hidden; }

  img, video, canvas, svg { max-width: 100%; height: auto; }

  input, textarea, select {
    color: rgba(255,255,255,.92);
    caret-color: rgba(255,255,255,.95);
  }
  input::placeholder, textarea::placeholder { color: rgba(255,255,255,.35); }

  ::selection { background: rgba(34,211,238,.25); }
}

/* ✅ Si ya se mostró el preloader, lo ocultamos */
.skip-preloader #app-preloader{ display:none !important; }

/* =========================================================
   COMPONENTS / UI
   ========================================================= */
@layer components {

  /* ✅ Fondo tech (gradientes) */
  .bg-tech{
    background:
      radial-gradient(900px 600px at 15% 10%, rgba(34,211,238,.18), transparent 60%),
      radial-gradient(900px 600px at 85% 0%, rgba(59,130,246,.18), transparent 55%),
      radial-gradient(800px 600px at 50% 100%, rgba(99,102,241,.14), transparent 60%),
      linear-gradient(180deg, #050814 0%, #060a16 45%, #050814 100%);
  }

  /* =======================================================
     ✅ FONDO PNG + 1 OVERLAY
     public/images/fondo.png  -> /images/fondo.png
     ======================================================= */
  .site-bg{
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background-image: var(--site-bg-image, url("/images/fondo.png"));
    background-repeat: no-repeat;
    background-position: var(--site-bg-x, -32px) 0;
    background-size: 680px auto;
    opacity: .9;
    filter: saturate(.95) contrast(1.05) brightness(.95);

    /* Fade hacia la derecha */
    -webkit-mask-image: linear-gradient(to right, #000 0%, #000 62%, transparent 92%);
            mask-image: linear-gradient(to right, #000 0%, #000 62%, transparent 92%);
  }

  @media (min-width: 1024px){
    .site-bg{
      background-size: 820px auto;
      --site-bg-x: var(--site-bg-x-lg, -42px);
    }
  }

  @media (min-width: 1536px){
    .site-bg{
      background-size: 980px auto;
      --site-bg-x: var(--site-bg-x-2xl, -52px);
    }
  }

  /* Una sola capa superior (overlay) */
  .site-overlay{
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    background: linear-gradient(
      90deg,
      rgba(5,8,20,.92) 0%,
      rgba(5,8,20,.55) 45%,
      rgba(5,8,20,.18) 70%,
      rgba(5,8,20,0) 92%
    );
  }

  /* UI helpers */
  .glass {
    @apply bg-black/60 backdrop-blur-xl border border-white/5 shadow-xl;
    box-shadow:
      0 10px 30px rgba(0, 0, 1, 0.45),
      0 0 0 1px rgb(0, 211, 250),
      0 0 18px rgba(34, 211, 238, 0.90);
  }
  .navlink { @apply text-white/95 hover:text-cyan-200 transition; }

  .chip { @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-white/30 bg-white/10 text-white/80 hover:bg-white/10 transition; }
  .chip-accent { @apply bg-cyan-400/20 border-cyan-300/30 text-cyan-100; }
  .area-pill {
    display: inline-flex;
    align-items: center;
    flex-shrink: 0;
    white-space: nowrap;
    border-radius: 999px;
    background-color: #aaff00;
    padding: 0.25rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 700;
    letter-spacing: 0.01em;
    color: #0b1200;
    box-shadow: 0 0 12px rgba(170, 255, 0, 0.35);
  }

  .price-old { @apply text-sm text-white/60 line-through; }
  .discount-badge{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.18rem 0.48rem;
    border-radius: 0.45rem;
    font-family: 'Cinzel', 'Times New Roman', serif;
    font-weight: 700;
    font-size: 0.72rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: #0b1300;
    background: #AEFF00;
    border: 1px solid rgba(174, 255, 0, 0.55);
    box-shadow:
      0 0 0 1px rgba(174, 255, 0, 0.22),
      0 6px 16px rgba(174, 255, 0, 0.18),
      0 0 20px rgba(174, 255, 0, 0.32);
  }

  .btn { @apply inline-flex items-center justify-center px-5 py-3 rounded-2xl font-semibold border border-white/10 transition; }
  .btn-ghost { @apply bg-white/5 hover:bg-white/10; }

  .btn-accent{
    @apply relative inline-flex items-center justify-center
           rounded-xl px-5 py-3 font-semibold
           bg-cyan-400 text-black
           border border-cyan-200/70
           transition duration-200 ease-out
           hover:bg-cyan-300 hover:-translate-y-0.5
           focus:outline-none focus:ring-2 focus:ring-cyan-200/70;

    /* Glow (neón) */
    box-shadow:
      0 0 0 1px rgba(34,211,238,.25),
      0 10px 22px rgba(34,211,238,.16),
      0 0 28px rgba(34,211,238,.28);

    isolation: isolate; /* para que el halo quede “detrás” */
  }

  /* Halo neón detrás (base) */
  .btn-accent::before{
    content:"";
    position:absolute;
    inset:-12px;
    z-index:-1;

    /* ✅ CLAVE para que NO se vea rectángulo */
    border-radius: calc(1rem + 12px); /* 1rem ≈ rounded-xl */

    background:
      radial-gradient(circle at 25% 30%, rgba(34,211,238,.75), transparent 70%),
      radial-gradient(circle at 75% 70%, rgba(56,189,248,.55), transparent 65%);
    filter: blur(10px);
    opacity: .25;
    pointer-events: none;
    transition: opacity .18s ease, filter .18s ease;
  }

  /* Hover = más brillo */
  .btn-accent:hover::before{
    opacity: .45;
    filter: blur(12px);
  }

  /* ✅ Seleccionado / click (focus) y presionado (active) = MÁS brillante */
  .btn-accent:focus::before,
  .btn-accent:active::before{
    opacity: .90;
    filter: blur(16px);
  }

  /* Glow del botón (difuso, sin borde “marcado”) */
  .btn-accent{
    box-shadow:
      0 10px 24px rgba(34, 219, 248, 0.18),
      0 0 26px rgba(33, 215, 244, 0.2);
  }

  .btn-accent:focus,
  .btn-accent:active{
    box-shadow:
      0 14px 34px rgba(34,211,238,.22),
      0 0 44px rgba(34,211,238,.35);
  }

  /* Evita contorno del navegador */
  .btn-accent:focus-visible{
    outline: none;
  }

  .btn-accent:hover::before{ opacity: .5; }
  .btn-accent:hover{
    background:
      linear-gradient(0deg, rgba(34,211,238,.92), rgba(34,211,238,.92)) padding-box,
      linear-gradient(135deg, rgba(34,211,238,.22), rgba(56,189,248,.10), rgba(59,130,246,.22)) border-box;
    border: 1px solid transparent;
  }

  /* Variante más elegante (solo para el botón Programas/Cursos) */
  .btn-accent.btn-accent-soft{
    box-shadow:
      0 0 0 1px rgba(34,211,238,.18),
      0 8px 18px rgba(34,211,238,.12),
      0 0 18px rgba(34,211,238,.18);
  }
  .btn-accent.btn-accent-soft::before{
    opacity: .04;
    filter: blur(3px);
  }
  .btn-accent.btn-accent-soft:hover::before{ opacity: .25; }
  .btn-accent.btn-accent-soft:focus-visible,
  .btn-accent.btn-accent-soft:active{
    box-shadow:
      0 0 0 1px rgba(34,211,238,.45),
      0 12px 26px rgba(34,211,238,.30),
      0 0 46px rgba(34,211,238,.55);
  }

  .iconbtn { @apply h-8 w-8 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center; }
  .input { @apply bg-white/5 border border-white/10 rounded-xl px-4 py-2 outline-none focus:ring-2 focus:ring-cyan-400/40; }

  .shadow-glow{
    box-shadow: 0 0 0 1px rgba(34,211,238,.25), 0 10px 30px rgba(34,211,238,.12);
  }

  /* Mini editor */
  .wysiwyg { @apply rounded-2xl border border-white/10 bg-white/5; }
  .wysiwyg-toolbar { @apply flex flex-wrap gap-2 p-2 border-b border-white/10 bg-black/20; }
  .wysiwyg-editor { @apply min-h-[140px] px-4 py-3 outline-none; }
  .wysiwyg-editor:empty:before { content: attr(data-placeholder); color: rgba(255,255,255,.35); }
  .wysiwyg-content ul { list-style: disc; margin-left: 1.25rem; }
  .wysiwyg-content ol { list-style: decimal; margin-left: 1.25rem; }
  .wysiwyg-content li { margin: .2rem 0; }
  .wysiwyg-content p { margin: .5rem 0; }
  .wysiwyg-content b,
  .wysiwyg-content strong { font-weight: 700; }
  .wysiwyg-content i,
  .wysiwyg-content em { font-style: italic; }
  .wysiwyg-content u { text-decoration: underline; }
}

/* =========================================================
   PRELOADER (Splash Screen)
   ========================================================= */
#app-preloader{
  --fade-ms: 520ms;

  position: fixed;
  inset: 0;
  z-index: 99999;
  display: grid;
  place-items: center;

  background:
    radial-gradient(600px 320px at 50% 45%, rgb(var(--accent-rgb) / 0.10), transparent 55%),
    radial-gradient(900px 520px at 50% 55%, rgb(var(--accent2-rgb) / 0.10), transparent 65%),
    linear-gradient(180deg, rgba(0,0,0,0.92), rgba(0,0,0,0.94));
  backdrop-filter: blur(6px);

  opacity: 1;
  transform: translateY(0) scale(1);
  transition:
    opacity var(--fade-ms) ease,
    transform var(--fade-ms) ease,
    visibility var(--fade-ms) ease;
}

#app-preloader.is-hiding{
  opacity: 0;
  transform: translateY(-6px) scale(1.01);
  visibility: hidden;
  pointer-events: none;
}

/* scanlines */
#app-preloader::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.10;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.06) 0px,
    rgba(255,255,255,.06) 1px,
    rgba(0,0,0,0) 3px,
    rgba(0,0,0,0) 6px
  );
  animation: pre-scan 5.5s linear infinite;
}

/* ruido suave */
#app-preloader::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.06;
  background: repeating-linear-gradient(90deg,
    rgba(255,255,255,.12) 0px,
    rgba(255,255,255,.12) 1px,
    rgba(0,0,0,0) 2px,
    rgba(0,0,0,0) 6px
  );
  mix-blend-mode: overlay;
  animation: pre-noise 1.2s steps(2) infinite;
}

/* ✅ Centro REAL */
.preloader-center{
  position: relative;
  width: min(560px, 92vw);
  min-height: 320px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 18px 22px;
}

/* orb/ring */
.preloader-orb{
  position:absolute;
  left:50%;
  top:50%;
  width: 220px;
  height: 220px;
  transform: translate(-50%,-50%);
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%,
    rgb(var(--accent-rgb) / 0.22),
    rgb(var(--accent2-rgb) / 0.10) 40%,
    transparent 70%);
  filter: blur(2px);
  opacity: .65;
}
.preloader-orb::before{
  content:"";
  position:absolute; inset: 16px;
  border-radius: 999px;
  border: 1px solid rgb(var(--accent-rgb) / 0.18);
  box-shadow:
    0 0 30px rgb(var(--accent-rgb) / 0.12),
    inset 0 0 18px rgb(var(--accent2-rgb) / 0.10);
}

/* Title */
.preloader-title{
  position: relative;
  font-weight: 900;
  letter-spacing: .02em;
  font-size: clamp(34px, 4.4vw, 56px);
  line-height: 1.05;
  margin: 0;
  text-shadow: 0 10px 35px rgba(0,0,0,.55);
}

/* Wave */
.preloader-title .wave{
  display: inline-flex;
  gap: 0.02em;
}
.preloader-title .wave > span{
  display:inline-block;
  opacity: 0;
  transform: translateY(18px) scale(1.25);
  filter: blur(9px);
  will-change: transform, opacity, filter;
  animation: waveIn 950ms cubic-bezier(.16,1,.3,1) forwards;
  animation-delay: var(--d, 0ms);
}
@keyframes waveIn{
  0%{ opacity:0; transform: translateY(18px) scale(1.25); filter:blur(10px); }
  60%{ opacity:1; transform: translateY(-2px) scale(1.02); filter:blur(1.5px); }
  100%{ opacity:1; transform: translateY(0) scale(1); filter:blur(0); }
}

/* Sub + Bar */
.preloader-sub{
  margin-top: 14px;
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:center;
  color: rgba(255,255,255,.72);
  font-size: 13px;
  letter-spacing:.12em;
  text-transform: uppercase;
}
.preloader-percent{
  color: rgb(var(--accent-rgb) / 0.95);
  font-weight: 700;
}

.preloader-bar{
  margin: 14px auto 0;
  width: min(360px, 86vw);
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
  overflow:hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.45);
}
.preloader-bar-fill{
  height:100%;
  width:100%;
  transform-origin: left center;
  transform: scaleX(0);
  background: linear-gradient(90deg,
    rgb(var(--accent-rgb) / 0.15),
    rgb(var(--accent-rgb) / 0.95),
    rgb(var(--accent2-rgb) / 0.80)
  );
  box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.35);
}

/* Particles */
.preloader-particles{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.preloader-particle{
  position:absolute;
  left: calc(var(--x) * 1%);
  top:  calc(var(--y) * 1%);
  width: calc(var(--s) * 1px);
  height: calc(var(--s) * 1px);
  border-radius: 6px;
  transform: rotate(45deg);
  background: rgb(var(--accent-rgb) / 0.05);
  border: 1px solid rgb(var(--accent-rgb) / 0.14);
  box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.06);
  opacity: .55;
  animation: pre-float calc(var(--d) * 1s) ease-in-out infinite alternate;
}

/* Glitch sutil */
.glitch::before,
.glitch::after{
  content: attr(data-text);
  position:absolute;
  inset:0;
  opacity: .12;
  pointer-events:none;
}
.glitch::before{
  color: rgb(var(--accent-rgb) / 0.65);
  transform: translateX(-1px);
  clip-path: inset(10% 0 60% 0);
  animation: pre-glitch1 1.8s infinite linear;
}
.glitch::after{
  color: rgb(var(--accent2-rgb) / 0.65);
  transform: translateX(1px);
  clip-path: inset(55% 0 12% 0);
  animation: pre-glitch2 2.2s infinite linear;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #app-preloader::before,
  #app-preloader::after,
  .preloader-particle,
  .glitch::before,
  .glitch::after,
  .preloader-title .wave > span{ animation: none !important; }
  .preloader-title .wave > span{ opacity:1; transform:none; filter:none; }
}

/* Keyframes extras */
@keyframes pre-float{
  0%   { transform: translate3d(0,0,0) rotate(45deg); }
  100% { transform: translate3d(0, -14px, 0) rotate(45deg); }
}
@keyframes pre-scan{ 0%{ transform: translateY(-10%);} 100%{ transform: translateY(10%);} }
@keyframes pre-noise{
  0%{ transform: translate3d(0,0,0); }
  25%{ transform: translate3d(-1%,0,0); }
  50%{ transform: translate3d(1%,0,0); }
  75%{ transform: translate3d(0,-1%,0); }
  100%{ transform: translate3d(0,1%,0); }
}
@keyframes pre-glitch1{
  0%,100%{ clip-path: inset(10% 0 60% 0); transform: translateX(-1px); }
  20%{ clip-path: inset(18% 0 55% 0); transform: translateX(-2px); }
  40%{ clip-path: inset(12% 0 62% 0); transform: translateX(0px); }
  60%{ clip-path: inset(22% 0 50% 0); transform: translateX(-1px); }
  80%{ clip-path: inset(14% 0 64% 0); transform: translateX(-2px); }
}
@keyframes pre-glitch2{
  0%,100%{ clip-path: inset(55% 0 12% 0); transform: translateX(1px); }
  25%{ clip-path: inset(50% 0 18% 0); transform: translateX(2px); }
  50%{ clip-path: inset(58% 0 10% 0); transform: translateX(0px); }
  75%{ clip-path: inset(52% 0 15% 0); transform: translateX(2px); }
}
