@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   BASE
   ========================================================= */
@layer base {
  :root{
    --accent-rgb: 34 211 238;   /* cyan */
    --accent2-rgb: 59 130 246;  /* blue */
  }

  html { scroll-behavior: smooth; }

  body{
    overflow-x: hidden;
    position: relative;
    isolation: isolate;
  }

  /* Bloquea scroll mientras esté activo el preloader */
  body.preloading { overflow: hidden; }

  img, video, canvas, svg { max-width: 100%; height: auto; }

  input, textarea, select {
    color: rgba(255,255,255,.92);
    caret-color: rgba(255,255,255,.95);
  }
  input::placeholder, textarea::placeholder { color: rgba(255,255,255,.35); }

  ::selection { background: rgba(34,211,238,.25); }
}

/* ✅ Si ya se mostró el preloader, lo ocultamos */
.skip-preloader #app-preloader{ display:none !important; }

/* =========================================================
   COMPONENTS / UI
   ========================================================= */
@layer components {

  /* ✅ Fondo tech (gradientes) */
  .bg-tech{
    background:
      radial-gradient(900px 600px at 15% 10%, rgba(34,211,238,.18), transparent 60%),
      radial-gradient(900px 600px at 85% 0%, rgba(59,130,246,.18), transparent 55%),
      radial-gradient(800px 600px at 50% 100%, rgba(99,102,241,.14), transparent 60%),
      linear-gradient(180deg, #050814 0%, #060a16 45%, #050814 100%);
  }

  /* =======================================================
     ✅ FONDO PNG REAL (SIEMPRE SE VE)
     public/images/fondo.png  -> /images/fondo.png
     ======================================================= */
  .site-bg{
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }

  /* Oscurecido suave a la izquierda */
  .site-bg::before{
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(
      90deg,
      rgba(5,8,20,.92) 0%,
      rgba(5,8,20,.55) 45%,
      rgba(5,8,20,0) 85%
    );
  }

  /* Tu PNG (se mezcla para que el blanco NO “reviente”) */
  .site-bg::after{
    content:"";
    position:absolute;
    inset:0;
    background: url("/images/fondo.png") no-repeat left center / 560px auto;

    /* ✅ Clave para PNG con fondo blanco: lo “apaga” y se integra */
    mix-blend-mode: multiply;

    opacity: .80; /* súbelo a 1 si lo quieres más fuerte */
    filter: saturate(.95) contrast(1.06) brightness(.92);

    /* Fade hacia la derecha */
    -webkit-mask-image: linear-gradient(to right, #000 0%, #000 62%, transparent 92%);
            mask-image: linear-gradient(to right, #000 0%, #000 62%, transparent 92%);
  }

  /* UI helpers */
  .glass { @apply bg-white/5 backdrop-blur-xl border border-white/10 shadow-xl; }
  .navlink { @apply text-white/80 hover:text-cyan-200 transition; }

  .chip { @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-white/10 bg-white/5 text-white/80 hover:bg-white/10 transition; }
  .chip-accent { @apply bg-cyan-400/20 border-cyan-300/30 text-cyan-100; }

  .btn { @apply inline-flex items-center justify-center px-5 py-3 rounded-2xl font-semibold border border-white/10 transition; }
  .btn-ghost { @apply bg-white/5 hover:bg-white/10; }
  .btn-accent { @apply bg-cyan-400/20 hover:bg-cyan-400/30 border-cyan-300/30 text-cyan-100; }

  .iconbtn { @apply h-10 w-10 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 inline-flex items-center justify-center; }
  .input { @apply bg-white/5 border border-white/10 rounded-xl px-4 py-2 outline-none focus:ring-2 focus:ring-cyan-400/40; }

  .shadow-glow{
    box-shadow: 0 0 0 1px rgba(34,211,238,.25), 0 10px 30px rgba(34,211,238,.12);
  }
}

/* =========================================================
   PRELOADER (Splash Screen)
   ========================================================= */
#app-preloader{
  --fade-ms: 520ms;

  position: fixed;
  inset: 0;
  z-index: 99999;
  display: grid;
  place-items: center;

  background:
    radial-gradient(600px 320px at 50% 45%, rgb(var(--accent-rgb) / 0.10), transparent 55%),
    radial-gradient(900px 520px at 50% 55%, rgb(var(--accent2-rgb) / 0.10), transparent 65%),
    linear-gradient(180deg, rgba(0,0,0,0.92), rgba(0,0,0,0.94));
  backdrop-filter: blur(6px);

  opacity: 1;
  transform: translateY(0) scale(1);
  transition:
    opacity var(--fade-ms) ease,
    transform var(--fade-ms) ease,
    visibility var(--fade-ms) ease;
}

#app-preloader.is-hiding{
  opacity: 0;
  transform: translateY(-6px) scale(1.01);
  visibility: hidden;
  pointer-events: none;
}

/* scanlines */
#app-preloader::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.10;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.06) 0px,
    rgba(255,255,255,.06) 1px,
    rgba(0,0,0,0) 3px,
    rgba(0,0,0,0) 6px
  );
  animation: pre-scan 5.5s linear infinite;
}

/* ruido suave */
#app-preloader::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.06;
  background: repeating-linear-gradient(90deg,
    rgba(255,255,255,.12) 0px,
    rgba(255,255,255,.12) 1px,
    rgba(0,0,0,0) 2px,
    rgba(0,0,0,0) 6px
  );
  mix-blend-mode: overlay;
  animation: pre-noise 1.2s steps(2) infinite;
}

/* ✅ Centro REAL */
.preloader-center{
  position: relative;
  width: min(560px, 92vw);
  min-height: 320px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 18px 22px;
}

/* orb/ring */
.preloader-orb{
  position:absolute;
  left:50%;
  top:50%;
  width: 220px;
  height: 220px;
  transform: translate(-50%,-50%);
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%,
    rgb(var(--accent-rgb) / 0.22),
    rgb(var(--accent2-rgb) / 0.10) 40%,
    transparent 70%);
  filter: blur(2px);
  opacity: .65;
}
.preloader-orb::before{
  content:"";
  position:absolute; inset: 16px;
  border-radius: 999px;
  border: 1px solid rgb(var(--accent-rgb) / 0.18);
  box-shadow:
    0 0 30px rgb(var(--accent-rgb) / 0.12),
    inset 0 0 18px rgb(var(--accent2-rgb) / 0.10);
}

/* Title */
.preloader-title{
  position: relative;
  font-weight: 900;
  letter-spacing: .02em;
  font-size: clamp(34px, 4.4vw, 56px);
  line-height: 1.05;
  margin: 0;
  text-shadow: 0 10px 35px rgba(0,0,0,.55);
}

/* Wave */
.preloader-title .wave{
  display: inline-flex;
  gap: 0.02em;
}
.preloader-title .wave > span{
  display:inline-block;
  opacity: 0;
  transform: translateY(18px) scale(1.25);
  filter: blur(9px);
  will-change: transform, opacity, filter;
  animation: waveIn 950ms cubic-bezier(.16,1,.3,1) forwards;
  animation-delay: var(--d, 0ms);
}
@keyframes waveIn{
  0%{ opacity:0; transform: translateY(18px) scale(1.25); filter:blur(10px); }
  60%{ opacity:1; transform: translateY(-2px) scale(1.02); filter:blur(1.5px); }
  100%{ opacity:1; transform: translateY(0) scale(1); filter:blur(0); }
}

/* Sub + Bar */
.preloader-sub{
  margin-top: 14px;
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:center;
  color: rgba(255,255,255,.72);
  font-size: 13px;
  letter-spacing:.12em;
  text-transform: uppercase;
}
.preloader-percent{
  color: rgb(var(--accent-rgb) / 0.95);
  font-weight: 700;
}

.preloader-bar{
  margin: 14px auto 0;
  width: min(360px, 86vw);
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
  overflow:hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.45);
}
.preloader-bar-fill{
  height:100%;
  width:100%;
  transform-origin: left center;
  transform: scaleX(0);
  background: linear-gradient(90deg,
    rgb(var(--accent-rgb) / 0.15),
    rgb(var(--accent-rgb) / 0.95),
    rgb(var(--accent2-rgb) / 0.80)
  );
  box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.35);
}

/* Particles */
.preloader-particles{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.preloader-particle{
  position:absolute;
  left: calc(var(--x) * 1%);
  top:  calc(var(--y) * 1%);
  width: calc(var(--s) * 1px);
  height: calc(var(--s) * 1px);
  border-radius: 6px;
  transform: rotate(45deg);
  background: rgb(var(--accent-rgb) / 0.05);
  border: 1px solid rgb(var(--accent-rgb) / 0.14);
  box-shadow: 0 0 18px rgb(var(--accent-rgb) / 0.06);
  opacity: .55;
  animation: pre-float calc(var(--d) * 1s) ease-in-out infinite alternate;
}

/* Glitch sutil */
.glitch::before,
.glitch::after{
  content: attr(data-text);
  position:absolute;
  inset:0;
  opacity: .12;
  pointer-events:none;
}
.glitch::before{
  color: rgb(var(--accent-rgb) / 0.65);
  transform: translateX(-1px);
  clip-path: inset(10% 0 60% 0);
  animation: pre-glitch1 1.8s infinite linear;
}
.glitch::after{
  color: rgb(var(--accent2-rgb) / 0.65);
  transform: translateX(1px);
  clip-path: inset(55% 0 12% 0);
  animation: pre-glitch2 2.2s infinite linear;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #app-preloader::before,
  #app-preloader::after,
  .preloader-particle,
  .glitch::before,
  .glitch::after,
  .preloader-title .wave > span{ animation: none !important; }
  .preloader-title .wave > span{ opacity:1; transform:none; filter:none; }
}

/* Keyframes extras */
@keyframes pre-float{
  0%   { transform: translate3d(0,0,0) rotate(45deg); }
  100% { transform: translate3d(0, -14px, 0) rotate(45deg); }
}
@keyframes pre-scan{ 0%{ transform: translateY(-10%);} 100%{ transform: translateY(10%);} }
@keyframes pre-noise{
  0%{ transform: translate3d(0,0,0); }
  25%{ transform: translate3d(-1%,0,0); }
  50%{ transform: translate3d(1%,0,0); }
  75%{ transform: translate3d(0,-1%,0); }
  100%{ transform: translate3d(0,1%,0); }
}
@keyframes pre-glitch1{
  0%,100%{ clip-path: inset(10% 0 60% 0); transform: translateX(-1px); }
  20%{ clip-path: inset(18% 0 55% 0); transform: translateX(-2px); }
  40%{ clip-path: inset(12% 0 62% 0); transform: translateX(0px); }
  60%{ clip-path: inset(22% 0 50% 0); transform: translateX(-1px); }
  80%{ clip-path: inset(14% 0 64% 0); transform: translateX(-2px); }
}
@keyframes pre-glitch2{
  0%,100%{ clip-path: inset(55% 0 12% 0); transform: translateX(1px); }
  25%{ clip-path: inset(50% 0 18% 0); transform: translateX(2px); }
  50%{ clip-path: inset(58% 0 10% 0); transform: translateX(0px); }
  75%{ clip-path: inset(52% 0 15% 0); transform: translateX(2px); }
}
